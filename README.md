
# You Spin Me Round game 

## Description

- The main goal of the game finish the small circles you have,and attacht them to the big circle without collapsing each other.
- If you finish the small circles you won! if they collapse you lose!

## MVP

- ✅ Create a canvas on the game screen 
- ✅ Draw small circles
- ✅ Draw big circles
- ✅ Rotate the big circle
- ✅ Move small circles when the space key is pressed
- ✅ Put the game is in the loop
- ✅ Win the game
- ✅ Lose the game
- ✅ Have different screen for each cases.
- ✅ Restart the game
- ✅ Use single Html
- ✅ Use OOP programming
  

## Backlog
- ✅ Add new levels to the game
- ✅ Add random numbers small circles to the game
- ✅ Add random speed to the levels
- ✅ Keep the local storage to keep name of user/ Save nickname
- ✅ Add audio for winning,losing and starting the game
- ✅ Get the name of user, Welcome and Farewell
- ✅ Show the latest score
- Refactoring the game
- Change some hardcoded values 
- Make better targeting
- Responsive Design
- Add different structures to the big circles for different levels.
  

## Data Structruce

### Canvas

- **cnv** variable get the game-screen node from which has the <canvas></canvas> html file
- **ctx** stands for the context which is the getContext is a special function you can apply your special functions on the canvas.
- **cnv.width,cnv.height**   determine the width and height of the canvas
- **ctx.lineWidth** is about the styling the circles.
- **getRandomInt** and **getRandom** are global functions to generate random numbers in certain range.
- **getRandom** doesnt use math.floor since the speed value will be generated by this function.Speed has decimal values
- **circles** array ->keeps the small circles to get looping over.
- **theLevel** -> an integer to keep track of the level
- **theCount** -> an integer to decide the number of the small circles
- **game** -> decides if the game is running,has been won or lost.
- **speed** ->the speed decides the spinning of big circle
- **distanceOfMainCircle** -> the distance of the lines between main circle and small circle.
- **MainCircle** -> draws the big circle using the methods of canvas and circle class
- **for loop** -> to create the first small circles.
- 
- **firstY** the value of the first small circle in Y direction
  - the circles are array of objects. it keeps inside the structure like this : array =>{
  - circle:{x:1,y:1,r:1},
  - firstY:y1} --> to use the firstY of catching directions.

  

### Game Class

- can take any arguments
- the constructor mostly to catch the dom elements.
  
#### start()

- calls to gameLoop() function inside of the game class to start the game
- and also changes screens between gameScreen(main played screen) and gameStart screen(you have at the beginning)
- plays the song.

#### gameLoop()

- the gameLoop call itself inside window.requestAnimationFrame to have a game without lag and keeps game running.
- game variable is a global variable is declared inside the canvas.js.
- game keeps tree value 
  - null -> game still going
  - false -> game lost.
  - true -> game is won
- inside the if condition the if the game value is false stops the game and game loop is finished.
- setTimeout function keep the screens 2000ms to see the animation and cleans the name of the player.
  
#### click() //! this gonna a harsh one

- the main logic happens here
- if game is null -> game continues
- go over the loop of array
- declare variable circle get the value of the circles inside the object
- isFree declares that if the small circle is iterated or not
-  iterating over the circles if the circle is already isFree skip this circle. Because they don't give the value of collapsing.
-  only checks not free circles.
-  So each click the clickcount is increasing is basically this is iterating. 
-  If the user clicked first time the count of click 1. So everytime the click happens the loop goes over the isNot free circles and check their x and y coordinates. and it checks if this x values are inside the circle.radius has been flagged as isFree ==false before
- If the conditions are met the game is over and return.
- it checks if the y-coordinate of the clicked circle is greater than or equal to a certain point in the game area, specifically mainCircle.y / 2. This condition ensures that the clicked circle is positioned vertically above a specific point within the game area.
- increment the count of click by 1
- if your countofclik is equal to the number of circles game is true and change the pages and the sounds
- if the game false reload the page
-   circles[countOfClick].circle.isFree = false; condition decides if the circle is clicked or not if the circle has the interaction is not so will taken in the if statemend

#### update()

- the main logic goes here.
- according to the game the background changes.
- fillRect cleans the background to get the default background of CSS 
- ctx.fill gives the background to the canvas elements inside the game screen.
- speed -= speed makes the big circle stop
- distancoOfMaincircle += distanceOfMainCircle make the line between the big circle and small circle change increases the distanceOfMainCircle by 0.05 if it's less than 10, and if it's already 10 or great to have slow animation
- firstY variable gets the value of the first y direction the small circle has.
- circle class has boolean value of isFree which enables us to detect selected circle
- if the value of isFree is true the changes mean the circle is free change the y direction by 40 for every click it takes the circle to the top
- it calls the circle.translate method from circle class. x direction stays the same but the value of change by y variable.
- if the circle is not free the translation method is called again. This time the mathematical equation of is applied to get the direction of the big circle.
- the angle is defined as 45.5 inside circle class
- and the angle variable changes by adding a constant speed value.
- and every time it draws the small circles
- and also draw the main circle every time.
- so this game. update() method called inside a setInterval function to make big circle rotating inside script.js 
- setInterval rotates circle

!!! since the moment you click is important sometimes the circles collapse but the moment of click is matters.



#### changeLevel()

- if game is true -> the first level is played and finished
- mainCicrle value inside +1
- speed changes randomly
- and also the number of small circles changes randomly.
- the game value changes to null to make game continue
- and draw new small circles with the loop with new **theCount** number
- circles[i].circle.draw() calls draw method inside circle class
  

#### resetGame()

- hides the finish Screen
- swipe of the variables has been set.
- theCount is 5 cause it always start with 5 small circle.
- circles[i].circle.draw() calls draw method inside circle class
  


### Circle Class
- takes context of canvas, x,y  coordinates and radius, the text angle and this free as parameter
  
#### draw
- beginPath(): to start drawing the path
- arc is creating the circle
- others are styling elements

#### translate
- the move the circle inside x and y coordinates

#### line
- to able to draw line between main and small circles



### Script

- keeps localstorage name
- write to an element welcome and add to dom
- button click events are managed from here
- also the eventlistener of the click and space
  

## Links
- [Trello link](https://trello.com/b/uSgVpQKq/game-project)https://trello.com/b/uSgVpQKq/game-project]
- [Deployment Link ](https://gizemayegul.github.io/hitmebabyonemoretime/)https://gizemayegul.github.io/hitmebabyonemoretime/
- [Github link](https://github.com/gizemayegul/hitmebabyonemoretime)https://github.com/gizemayegul/hitmebabyonemoretime
- [Slides Link](https://docs.google.com/presentation/d/1XpB1O-pbW3cK996ccPqG4itFtgqiCEsXr4aovq4Kqcg/edit#slide=id.g3fa6174f79_0_125)https://docs.google.com/presentation/d/1XpB1O-pbW3cK996ccPqG4itFtgqiCEsXr4aovq4Kqcg/edit#slide=id.g3fa6174f79_0_125
